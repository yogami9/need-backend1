FROM docker.elastic.co/elasticsearch/elasticsearch:8.13.0

# Configure Elasticsearch for single-node deployment
ENV discovery.type=single-node
ENV xpack.security.enabled=false
ENV ES_JAVA_OPTS="-Xms512m -Xmx512m"

# Health check
HEALTHCHECK --interval=30s --timeout=10s --retries=5 --start-period=60s \
  CMD curl -f http://localhost:9200/_cluster/health || exit 1

EXPOSE 9200